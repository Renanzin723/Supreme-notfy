<!DOCTYPE html>
<html>
<head>
    <title>Teste de Notifica√ß√£o</title>
</head>
<body>
    <h1>Teste de Notifica√ß√£o</h1>
    <button onclick="testNotification()">Testar Notifica√ß√£o Simples</button>
    <button onclick="testServiceWorker()">Testar Service Worker</button>
    
    <div id="status"></div>

    <script>
        function log(message) {
            document.getElementById('status').innerHTML += '<p>' + message + '</p>';
            console.log(message);
        }

        async function testNotification() {
            log('üîî Testando notifica√ß√£o simples...');
            
            if (!('Notification' in window)) {
                log('‚ùå Notifica√ß√µes n√£o suportadas');
                return;
            }

            let permission = await Notification.requestPermission();
            log('üìã Permiss√£o: ' + permission);

            if (permission === 'granted') {
                new Notification('Teste Simples', {
                    body: 'Esta √© uma notifica√ß√£o de teste',
                    icon: '/favicon.ico'
                });
                log('‚úÖ Notifica√ß√£o enviada');
            } else {
                log('‚ùå Permiss√£o negada');
            }
        }

        async function testServiceWorker() {
            log('üîß Testando Service Worker...');
            
            if (!('serviceWorker' in navigator)) {
                log('‚ùå Service Worker n√£o suportado');
                return;
            }

            try {
                const registration = await navigator.serviceWorker.register('/sw.js');
                log('‚úÖ Service Worker registrado: ' + registration.scope);
                
                await navigator.serviceWorker.ready;
                log('‚úÖ Service Worker pronto');
                
                // Testar notifica√ß√£o via Service Worker
                registration.showNotification('Teste via SW', {
                    body: 'Notifica√ß√£o via Service Worker',
                    icon: '/favicon.ico'
                });
                log('‚úÖ Notifica√ß√£o via SW enviada');
                
            } catch (error) {
                log('‚ùå Erro no Service Worker: ' + error.message);
            }
        }
    </script>
</body>
</html>
